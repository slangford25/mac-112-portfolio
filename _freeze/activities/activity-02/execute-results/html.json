{
  "hash": "b1b35390073adc2c92ffef5755bac032",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Activity 02- Bivariate Viz\"\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# Load data\nelections <- read.csv(\"https://mac-stat.github.io/data/election_2020_county.csv\")\n\n#packages\nlibrary(tidyverse)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.4     ✔ readr     2.1.5\n✔ forcats   1.0.0     ✔ stringr   1.5.1\n✔ ggplot2   3.5.1     ✔ tibble    3.2.1\n✔ lubridate 1.9.3     ✔ tidyr     1.3.1\n✔ purrr     1.0.2     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the conflicted package (<http://conflicted.r-lib.org/>) to force all conflicts to become errors\n```\n\n\n:::\n\n```{.r .cell-code}\n# Check it out\nhead(elections)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  state_name state_abbr historical    county_name county_fips total_votes_20\n1    Alabama         AL        red Autauga County        1001          27770\n2    Alabama         AL        red Baldwin County        1003         109679\n3    Alabama         AL        red Barbour County        1005          10518\n4    Alabama         AL        red    Bibb County        1007           9595\n5    Alabama         AL        red  Blount County        1009          27588\n6    Alabama         AL        red Bullock County        1011           4613\n  repub_pct_20 dem_pct_20 winner_20 total_votes_16 repub_pct_16 dem_pct_16\n1        71.44      27.02     repub          24661        73.44      23.96\n2        76.17      22.41     repub          94090        77.35      19.57\n3        53.45      45.79     repub          10390        52.27      46.66\n4        78.43      20.70     repub           8748        76.97      21.42\n5        89.57       9.57     repub          25384        89.85       8.47\n6        24.84      74.70       dem           4701        24.23      75.09\n  winner_16 total_votes_12 repub_pct_12 dem_pct_12 winner_12 total_population\n1     repub          23909        72.63      26.58     repub            54907\n2     repub          84988        77.39      21.57     repub           187114\n3     repub          11459        48.34      51.25       dem            27321\n4     repub           8391        73.07      26.22     repub            22754\n5     repub          23980        86.49      12.35     repub            57623\n6       dem           5318        23.51      76.31       dem            10746\n  percent_white percent_black percent_asian percent_hispanic per_capita_income\n1            76            18             1                2             24571\n2            83             9             1                4             26766\n3            46            46             0                5             16829\n4            75            22             0                2             17427\n5            88             1             0                8             20730\n6            22            71             0                6             18628\n  median_rent median_age\n1         668       37.5\n2         693       41.5\n3         382       38.3\n4         351       39.4\n5         403       39.6\n6         276       39.6\n```\n\n\n:::\n:::\n\nExercise 0: Review\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(elections, aes(x=winner_20)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggplot(elections, aes(repub_pct_20)) +\n  geom_histogram(fill=\"blue\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-2-2.png){width=672}\n:::\n:::\n\n\nExercise 1 Quantitative vs Quantitative Intuition Check\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(elections, aes(x=repub_pct_16, y=repub_pct_20)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\nExercise 2: 2 Quantitiative Variables\n\n::: {.cell}\n\n```{.r .cell-code}\n# Set up the plotting frame\n# How does this differ than the frame for our histogram of repub_pct_20 alone?\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16))\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Add a layer of points for each county\n# Take note of the geom!\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-4-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# Change the shape of the points\n# What happens if you change the shape to another number?\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_point(shape = 4)\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-4-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# YOU TRY: Modify the code to make the points \"orange\"\n# NOTE: Try to anticipate if \"color\" or \"fill\" will be useful here. Then try both.\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_point(color = \"orange\")\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-4-4.png){width=672}\n:::\n:::\n\n\nExercise 3: Reflect\nSummarize the relationship between the Republican support in 2020 and 2016. Be sure to comment on:\n\nthe strength of the relationship (weak/moderate/strong)\nthe direction of the relationship (positive/negative)\noutliers (in what state do counties deviate from the national trend? Any ideas why this might be the case?)\n\nRepublican support in 2020 and 2016 have a strong positive correlation. There are \n\nExercise 4:\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_point() +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Construct a new plot that contains the model smooth but does not include the individual point glyphs.\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_smooth()\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using method = 'gam' and formula = 'y ~ s(x, bs = \"cs\")'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-5-2.png){width=672}\n:::\n\n```{.r .cell-code}\n#By default, geom_smooth() adds a smooth, localized model line. To examine the “best” linear model, we can specify method = \"lm\". It’s pretty similar in this example!\nggplot(elections, aes(y = repub_pct_20, x = repub_pct_16)) +\n  geom_point() +\n  geom_smooth(method = \"lm\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`geom_smooth()` using formula = 'y ~ x'\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-5-3.png){width=672}\n:::\n:::\n\n\nExercise 5: Your Turn\nTo examine how the 2020 results are related to some county demographics, construct scatterplots of repub_pct_20 vs median_rent, and repub_pct_20 vs median_age. Summarize the relationship between these two variables and comment on which is the better predictor of repub_pct_20, median_rent or median_age.\n\n::: {.cell}\n\n```{.r .cell-code}\n# Scatterplot of repub_pct_20 vs median_rent\nggplot(elections, aes(x=median_rent, y=repub_pct_20)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Scatterplot of repub_pct_20 vs median_age\nggplot(elections, aes(x=median_age, y=repub_pct_20)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-6-2.png){width=672}\n:::\n:::\n\n\nExercise 6: A Sad Scatterplot\nNext, let’s explore the relationship between a county’s 2020 Republican support repub_pct_20 and the historical political trends in its state. In this case repub_pct_20 is quantitative, but historical is categorical. Explain why a scatterplot might not be an effective visualization for exploring this relationship. (What questions does / doesn’t it help answer?)\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(elections, aes(y = repub_pct_20, x = historical)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nExercise 7: Quantitative vs Categorical – Violins & Boxes\nThough the above scatterplot did group the counties by historical category, it’s nearly impossible to pick out meaningful patterns in 2020 Republican support in each category. Let’s try adding 2 different geom layers to the frame:\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Side-by-side violin plots\nggplot(elections, aes(y = repub_pct_20, x = historical)) +\n  geom_violin()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# Side-by-side boxplots (defined below)\nggplot(elections, aes(y = repub_pct_20, x = historical)) +\n  geom_boxplot()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n:::\n\n\nExercise 8\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\nExercise 9: Quantitative vs Categorical – Density Plots\n\n::: {.cell}\n\n```{.r .cell-code}\n# Name two \"bad\" things about this plot: colors != historical colors, plots stacked on top of each other so hard to read\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# What does scale_fill_manual do? Changes the colors manually\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density() +\n  scale_fill_manual(values = c(\"blue\", \"purple\", \"red\"))\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-10-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# What does alpha = 0.5 do? Makes the fill of the plots 50% transparent\n# Play around with different values of alpha, between 0 and 1\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density(alpha = 0.5) +\n  scale_fill_manual(values = c(\"blue\", \"purple\", \"red\"))\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-10-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# What does facet_wrap do?! Makes 3 different plots\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_density() +\n  scale_fill_manual(values = c(\"blue\", \"purple\", \"red\")) +\n  facet_wrap(~ historical)\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-10-4.png){width=672}\n:::\n\n```{.r .cell-code}\n# Let's try a similar grouping strategy with a histogram instead of density plot. uggo, hard to read\n# Why is this terrible?\nggplot(elections, aes(x = repub_pct_20, fill = historical)) +\n  geom_histogram(color = \"white\") +\n  scale_fill_manual(values = c(\"blue\", \"purple\", \"red\"))\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n`stat_bin()` using `bins = 30`. Pick better value with `binwidth`.\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-10-5.png){width=672}\n:::\n:::\n\nExercise 10\nWe’ve now learned 3 (of many) ways to visualize the relationship between a quantitative and categorical variable: side-by-side violins, boxplots, and density plots.\n\nWhich do you like best?\nboxplots\n\nWhat is one pro of density plots relative to boxplots?\ncan get more details (in terms of the numbers you get)\n\nWhat is one con of density plots relative to boxplots?\nspecifics get lost\n\n\nExercise 11: Categorical vs Categorical – Intuition Check\nFinally, let’s simply explore who won each county in 2020 (winner_20) and how this breaks down by historical voting trends in the state. That is, let’s explore the relationship between 2 categorical variables! Following the same themes as above, we can utilize grouping features such as fill/color or facets to distinguish between different categories of winner_20 and historical.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot 1: adjust this to recreate the top plot\nggplot(elections, aes(x = historical, fill = winner_20)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Plot 2: adjust this to recreate the bottom plot\nggplot(elections, aes(x = winner_20)) +\n  geom_bar() +\n  facet_wrap(~ historical) \n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\nExercise 12: Categorical vs Categorical\nConstruct the following 4 bar plot visualizations.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# A stacked bar plot\n# How are the \"historical\" and \"winner_20\" variables mapped to the plot, i.e. what roles do they play?\nggplot(elections, aes(x = historical, fill = winner_20)) +\n  geom_bar()\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# A faceted bar plot\nggplot(elections, aes(x = winner_20)) +\n  geom_bar() +\n  facet_wrap(~ historical)\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-13-2.png){width=672}\n:::\n\n```{.r .cell-code}\n# A side-by-side bar plot\n# Note the new argument to geom_bar\nggplot(elections, aes(x = historical, fill = winner_20)) +\n  geom_bar(position = \"dodge\")\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-13-3.png){width=672}\n:::\n\n```{.r .cell-code}\n# A proportional bar plot\n# Note the new argument to geom_bar\nggplot(elections, aes(x = historical, fill = winner_20)) +\n  geom_bar(position = \"fill\")\n```\n\n::: {.cell-output-display}\n![](activity-02_files/figure-html/unnamed-chunk-13-4.png){width=672}\n:::\n:::\n\nPart a\nName one pro and one con of using the “proportional bar plot” instead of one of the other three options.\n\nPart b\nWhat’s your favorite bar plot from part and why?\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}